<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% block title %}Invoice Processing{% endblock %}</title> 
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        body { font-family: sans-serif; }
        .sidebar { width: 250px; }
        .content { margin-left: 250px; }
        .active-link { background-color: #4B5563; }
    </style>
    {% block extra_head %}{% endblock %}
</head>
<body class="bg-gray-100 flex min-h-screen">
    <aside class="sidebar bg-gray-800 text-white p-4 fixed h-full flex flex-col">
        <div class="flex-grow">
            <h1 class="text-2xl font-bold mb-6 text-indigo-400">InvoiceFlow</h1>
            <nav>
                <ul>
                    <li class="mb-2">
                        <a href="{% url 'app_invoices:dashboard' %}" class="block py-2 px-4 rounded hover:bg-gray-700 {% if request.resolver_match.url_name == 'dashboard' %}active-link{% endif %}">
                            ğŸ  Dashboard
                        </a>
                    </li>
                    <li class="mb-2">
                        <a href="{% url 'app_invoices:invoice-list' %}" class="block py-2 px-4 rounded hover:bg-gray-700 {% if request.resolver_match.url_name == 'invoice-list' or request.resolver_match.url_name == 'invoice-detail' %}active-link{% endif %}">
                            ğŸ§¾ HÃ³a Ä‘Æ¡n
                        </a>
                    </li>
                    <li class="mb-2">
                        <a href="{% url 'app_invoices:task-list' %}" class="block py-2 px-4 rounded hover:bg-gray-700 {% if request.resolver_match.url_name == 'task-list' %}active-link{% endif %}">
                            ğŸ“‹ Nhiá»‡m vá»¥
                        </a>
                    </li>
                    <li class="mb-2">
                        <a href="{% url 'app_invoices:task-assignment' %}" class="block py-2 px-4 rounded hover:bg-gray-700 {% if request.resolver_match.url_name == 'task-assignment' %}active-link{% endif %}">
                            ğŸ‘¥ PhÃ¢n cÃ´ng
                        </a>
                    </li>
                    <li class="mb-2">
                        <a href="{% url 'app_invoices:reports' %}" class="block py-2 px-4 rounded hover:bg-gray-700 {% if request.resolver_match.url_name == 'reports' %}active-link{% endif %}">
                            ğŸ“ˆ BÃ¡o cÃ¡o
                        </a>
                    </li>
                    <li class="mb-2">
                        <a href="{% url 'app_invoices:ai-dashboard' %}" class="block py-2 px-4 rounded hover:bg-gray-700 {% if request.resolver_match.url_name == 'ai-dashboard' %}active-link{% endif %}">
                            ğŸ¤– AI Dashboard
                        </a>
                    </li>
                    <li class="mb-2">
                        <a href="{% url 'app_invoices:ai-chat' %}" class="block py-2 px-4 rounded hover:bg-gray-700 {% if request.resolver_match.url_name == 'ai-chat' %}active-link{% endif %}">
                            ğŸ’¬ AI Chat
                        </a>
                    </li>
                    <li class="mb-2">
                        <a href="{% url 'app_invoices:erp-settings' %}" class="block py-2 px-4 rounded hover:bg-gray-700 {% if request.resolver_match.url_name == 'erp-settings' %}active-link{% endif %}">
                            âš™ï¸ CÃ i Ä‘áº·t
                        </a>
                    </li>
                </ul>
            </nav>
        </div>
        <div class="mt-auto">
            {% if user.is_authenticated %}
                <p class="text-sm text-gray-400 mb-2">Xin chÃ o, {{ user.username }}</p>
                <a href="{% url 'app_invoices:logout' %}" class="block py-2 px-4 rounded bg-red-600 hover:bg-red-700 text-center">ğŸšª ÄÄƒng xuáº¥t</a>
            {% else %}
                <a href="{% url 'app_invoices:login' %}" class="block py-2 px-4 rounded bg-green-600 hover:bg-green-700 text-center">ğŸ” ÄÄƒng nháº­p</a>
            {% endif %}
        </div>
    </aside>

    <main class="content flex-1 p-8">
        {% if messages %}
            <div class="mb-4">
                {% for message in messages %}
                    <div class="p-3 rounded-md {% if message.tags == 'error' %}bg-red-100 text-red-700{% elif message.tags == 'success' %}bg-green-100 text-green-700{% else %}bg-blue-100 text-blue-700{% endif %}">
                        {{ message }}
                    </div>
                {% endfor %}
            </div>
        {% endif %}

        {% block content %}
        {% endblock content %} 
    </main>

    {% block extra_js %}{% endblock extra_js %}
</body>
</html>